try{var _ADOMAIN=document.domain.split(".");var _SDOMAIN=_ADOMAIN[_ADOMAIN.length-2]+"."+_ADOMAIN[_ADOMAIN.length-1];document.domain=_SDOMAIN}catch(e){}AP.widget.basic=new AP.Class({setOptions:function(a){return AP.hashExtend({eventType:"click",isSetPos:true,validate:function(){},isSetTip:true,isAuto:true,denominator:1,tipHook:"",tabId:"",initTab:"",formId:"",inputType:"",afterdoaction:function(b){}},a||{})},initialize:function(a,b){this.targets=a;this.options=this.setOptions(b);this.targets.forEach(function(c,d){this.bindEvents(c,this.getVessel(c))},this)},getVessel:function(a){a.href?vessel=D.get(a.href.split("#")[1]+"Extend"):vessel=D.get(a.id+"Extend");return vessel},bindEvents:function(a,b){console.log("抽象类,不能实例化")},action:function(b,a){var c=this.getVessel(a);D.hasClass(c,"fn-hide")?this.show(c):this.hide(c);if(this.options.isSetPos){this.setPosition(a,c)}},show:function(a){D.removeClass(a,"fn-hide")},hide:function(a){D.addClass(a,"fn-hide")},setPosition:function(h,j){var d=D.getRegion(h),g=D.getRegion(j);var c=d.left,b=d.top;var a=g.bottom-g.top;var f=g.right-g.left;D.setStyle(j,"position","absolute");D.setStyle(j,"left",c+this.options.xLeft+"px");if(!isNaN(a)){D.setStyle(j,"top",b-a/this.options.denominator+this.options.yTop+"px")}if(!isNaN(f)){D.setStyle(j,"width",f+"px")}}});AP.widget.dropDown=AP.widget.basic.extend({initialize:function(a,b){this.parent(a,b);this.tag=false},bindEvents:function(a,b){E.on(a,this.options.eventType,this.action,a,this);E.on(a,"mouseover",this.setTagTrue,a,this);E.on(a,"mouseout",this.setTagFalse,a,this);if(this.options.isAuto){E.on(document,"click",this.bodyClick,b,this)}},bodyClick:function(a,b){if(this.tag===false){this.hide(b)}},setTagTrue:function(){this.tag=true},setTagFalse:function(){this.tag=false}});AP.widget.aPop=AP.widget.basic.extend({bindEvents:function(a,b){E.on(a,this.options.eventType,this.action,a,this);if(this.options.isAuto){E.on(a,"mouseout",this.action,a,this)}else{var c=D.get("J-tip-container");this.setCloseTip(c);E.on(D.query(".J_popClose"),"click",this.action,a,this)}},action:function(b,a){this.parent(b,a);var c=D.get(this.options.tipHook);if(this.options.isSetTip){c?this.delTip(c,vessel):this.setTip(vessel)}E.stopEvent(b);this.options.afterdoaction(a)},setTip:function(b){var a=Element.create("div",{appendTo:b,"class":this.options.tipHook,id:this.options.tipHook});D.setStyle(a,"top",b.offsetHeight/this.options.denominator+"px");D.setStyle(a,"left",-a.offsetWidth+"px");return a},delTip:function(a,b){return Element.remove(a,b)},setCloseTip:function(b){var a=Element.create("span",{appendTo:b.parentNode,"class":"J_popClose ui-dialog-close"});a.innerHTML='<a href="#">关闭</a>';return a}});AP.widget.ajaxPop=AP.widget.aPop.extend({bindEvents:function(a,b){AP.widget.aPop.prototype.bindEvents.apply(this,arguments);this._loaded=false;this.vessel=b;this.tipContainer=D.query("#J-tip-container")[0];E.on(a,this.options.eventType,this.loadData,a,this)},loadData:function(c,d){var a=this;setTimeout(function(){a.doLayout()},0);if(this._loaded){setTimeout(function(){a.doLayout()},0);return}this.url=this.options.url||d.getAttribute("ajaxpopurl");var f={success:this.handlSuccess,failure:this.handlFailure,scope:this};var b=YAHOO.util.Connect.asyncRequest("GET",this.url,f)},handlSuccess:function(b){this._loaded=true;html=b.responseText;D.get(this.tipContainer).innerHTML=html;var a=this;setTimeout(function(){a.doLayout()},0);this.doLayout()},handlFailure:function(){},doLayout:function(){this.setPosition(this.targets[0],this.vessel);var a=parseInt(D.getStyle(this.vessel,"width"),10);if(a>420){this.vessel.style.width="420px"}else{this.vessel.style.width="auto"}D.setStyle(this.tip,"top",this.vessel.offsetHeight/this.options.denominator+"px");D.setStyle(this.tip,"left",-this.tip.offsetWidth+"px")},setTip:function(){this.tip=AP.widget.aPop.prototype.setTip.apply(this,arguments);return this.tip}});AP.widget.xTab=AP.widget.basic.extend({bindEvents:function(a,b){E.on(a,this.options.eventType,this.action,a,this);E.on(window,"load",this.oXtab,a,this)},action:function(d,c){var g=c.className.split(" ")[0];var a=D.query("a."+g,D.get(this.options.tabId));for(i=0,len=a.length;i<len;i++){var b=a[i].href.split("#")[1];var f=D.get(b+"Extend");if(f){D.addClass(f,"fn-hide")}D.removeClass(a[i].parentNode,"current");if(c.href==a[i].href){D.addClass(c.parentNode,"current");if(f){D.removeClass(f,"fn-hide")}if(D.get(b)&&D.get(b).type=="radio"){D.get(b).checked=true}}E.preventDefault(d)}this.options.afterdoaction(c)},showTab:function(b){b=this.targets.length>b?b:0;initTab=this.targets[b].id;D.removeClass(D.get(initTab+"Extend"),"fn-hide");var a=D.get(initTab);D.addClass(a.parentNode,"current");return this},oXtab:function(c,b){var a=D.get(this.options.initTab);if(a){D.removeClass(D.get(this.options.initTab+"Extend"),"fn-hide");D.addClass(a.parentNode,"current");this.options.afterdoaction(a)}else{this.showTab(0);this.options.afterdoaction(this.targets[0])}}});AP.widget.rTab=AP.widget.xTab.extend({bindEvents:function(a,b){E.on(a,this.options.eventType,this.action,a,this)},action:function(b,a){if(a.tagName=="INPUT"){this.rClick(b,a)}else{this.parent(b,a)}this.options.afterdoaction(a)},rClick:function(c,b){var f=b.className.split(" ")[0];var a=D.query("input."+f,D.get(this.options.tabId));for(i=0,len=a.length;i<len;i++){var g=a[i].id;var d=D.get(g+"Extend");D.removeClass(D.getNextSibling(a[i]),"current");D.addClass(D.get(a[i].id+"Extend"),"fn-hide");if(b.id==a[i].id){D.addClass(D.getNextSibling(b),"current");D.removeClass(D.get(b.id+"Extend"),"fn-hide")}}}});AP.widget.checkForm=AP.widget.basic.extend({bindEvents:function(a,b){E.on(a,this.options.eventType,this.action,a,this)},action:function(b,a){this.ifCheck(b,a);this.options.validate(b)},ifCheck:function(d,c){var g=this.getVessel(c);var a=D.query("input[type="+this.options.inputType+"]",D.get(this.options.formId));var f=a.length;var b=0;for(i=0;i<f;i++){if(a[i].checked===true){b+=1}}if(b===0){this.show(g);D.addClass(g.parentNode,"ui-fm-error");E.preventDefault(d)}}});AP.widget.setInputStyle=new AP.Class({initialize:function(a){this.targets=a;this.targets.forEach(function(b,c){this.bindEvents(b)},this)},bindEvents:function(a){E.on(a,"mouseover",function(){if(a.type=="button"||a.type=="submit"){if(D.hasClass(this.parentNode,"btn-ok")){D.addClass(this.parentNode,"btn-ok-hover")}}else{D.addClass(this.parentNode,"ui-fm-hover")}});E.on(a,"focus",function(){D.addClass(this.parentNode,"ui-fm-focus")});E.on(a,"blur",function(){D.removeClass(this.parentNode,"ui-fm-focus")});E.on(a,"mouseout",function(){if(a.type=="button"||a.type=="submit"){if(D.hasClass(this.parentNode,"ui-btn-ok")){D.removeClass(this.parentNode,"ui-btn-ok-hover")}}else{D.removeClass(this.parentNode,"ui-fm-hover")}})}});AP.core.api=AP.core.api.extend({showInputError:function(g){var f,a=D.query(".ui-fm-explain");if(a.length){for(var d=0,b=a.length;d<b;d++){f=a[d];if(D.hasClass(f.parentNode,"ui-fm-error")||D.hasClass(f.parentNode.parentNode,"ui-fm-error")){f.innerHTML="";f=D.removeClass(f.parentNode,"ui-fm-error")||D.removeClass(f.parentNode.parentNode,"ui-fm-error")}}}for(key in g){f=D.get(key).parentNode;var c=D.query(".ui-fm-explain",f)[0];if(!c){c=document.createElement("p");f.appendChild(c);D.addClass(c,"ui-fm-explain")}if(D.hasClass(c,"fn-hide")){D.removeClass(c,"fn-hide")}D.addClass(f,"ui-fm-error");c.innerHTML=g[key]}}});function DepositForm(b,a){this.form=D.get(b);a=a||{};this.options={checkDepositAmount:false,showConfirmBox:true,decimalSupport:true};this.options=YAHOO.util.Lang.merge(this.options,a);this._init()}DepositForm.prototype={_init:function(){this.submitBtn=D.query("input[type=submit]",this.form)[0];this.checkformevent=new YAHOO.util.CustomEvent("checkformevent",this);this.usercheck={};this._initEvent();this._setDefalutFocus()},_setDefalutFocus:function(){var a=D.query("input[type=text]",this.form);a[0]&&a[0].focus()},_initEvent:function(){E.on(this.form,"submit",this._submit,{},this);if(this.options.checkDepositAmount&&this.form.depositAmount){var a=this.form.depositAmount,b=D.query(".ui-fm-explain",a.parentNode)[0];this.checkformevent.subscribe(function(){var c=YAHOO.lang.trim(a.value);if(c===""){D.addClass(a.parentNode,"ui-fm-error");D.removeClass(b,"fn-hide");b.innerHTML="请输入金额！";this.usercheck.depositAmount=false;return false}else{if(isNaN(+c)||(!isNaN(+c)&&+c<0.01)){D.addClass(a.parentNode,"ui-fm-error");D.removeClass(b,"fn-hide");b.innerHTML="请输入正确的金额格式！";this.usercheck.depositAmount=false;return false}else{D.removeClass(a.parentNode,"ui-fm-error");D.addClass(b,"fn-hide");b.innerHTML="";this.usercheck.depositAmount=true;return true}}})}},check:function(){return this.checkformevent.fire()},_submit:function(a){if(!this.check()){return E.stopEvent(a)}return this.done()},submit:function(){var a=true;for(var b in this.usercheck){if(!this.usercheck[b]){reslut=false;break}}if(a){this.done();this.form.submit()}},setConfirmBoxURI:function(a){return this.confirmBoxURI=a},getConfirmBoxURI:function(){if(!this.confirmBoxURI){this.confirmBoxURI=this.submitBtn.getAttribute("data:xbox-url")}return this.confirmBoxURI},setConfirmBox:function(){var a=this;this.confirmBox=new AP.widget.xBox({type:"iframe",modal:false,value:function(b){return a.getConfirmBoxURI()},fixed:false,width:500});return this.confirmBox},getConfirmBox:function(){if(!this.confirmBox){this.setConfirmBox()}return this.confirmBox},done:function(){var a=this;D.addClass(this.submitBtn.parentNode,"ui-btn-cancel");D.replaceClass(this.submitBtn.parentNode,"ui-btn-ok","ui-btn-cancel");this.submitBtn.setAttribute("disabled","disabled");this.form.depositAmount&&this.form.depositAmount.setAttribute("readonly","readonly");this.options.showConfirmBox&&setTimeout(function(){a.getConfirmBox().fire()},1000)},setSubmitBtn:function(a){this.submitBtn=D.get(a);E.on(this.submitBtn,"click",this._submit,{},this)}};function disableBtn(a){D.replaceClass(a,"ui-btn-ok","ui-btn-cancel");D.query("input",a)[0].disabled=true}function enableBtn(a){D.replaceClass(a,"ui-btn-cancel","ui-btn-ok");D.query("input",a)[0].disabled=false}(function(){AP.cache.xbox={};var b=new AP.Class({options:{},cfg:{MOCK:"xbox-mock",MOCK_CLASS:"xbox-mock",LOAD:"xbox-load",IFRAME:"xbox-iframe",IFRAME_FIX:"xbox-hide-select",OVERLAY:"xbox-overlay",OVERLAY_BG:"xbox-overlay-bg"},setOptions:function(c){return AP.hashExtend({el:"",type:"string",value:"",modal:true,width:600,height:"",maxWidth:800,maxHeight:500,minHeight:null,autoFit:true,autoShow:false,border:true,onShowEvent:false,onHideEvent:false,noScroll:false,fixed:false,load:false,cross_domain:false,loadsrc:AP.fn.url.img+"/global/loading.gif"},c,true)},initialize:function(d){var c=this;this.options=this.setOptions(d);this._preLoadImg();this._bindEvent();E.on(document,"keyup",function(f){if(E.getCharCode(f||window.event)==27){AP.widget.xBox.hide();try{parent.AP.widget.xBox.hide()}catch(f){}}});if(this.options.onHideEvent){AP.cache.xbox.onHideEvent=this.options.onHideEvent}},_preLoadImg:function(){var c=new Image();c.src=this.options.loadsrc},_bindEvent:function(){if(this.options.el!==false&&this.options.el!==""){E.on(this.options.el,"click",function(d,c){c.fire.call(c,this,c);E.preventDefault(d)},this)}E.on(D.query(".xbox-close-link"),"click",function(c){AP.widget.xBox.hide();E.preventDefault(c)})},_makeValue:function(){var c=this.options.value,d=this.options.type;if(typeof(c)=="function"){return c.call(this,AP.cache.xbox.fireObject)}if(d==="iframe"){return c}else{if(/^[a-zA-Z]([^#.\s]*)[a-zA-Z0-9]$/.test(c)){return D.get(c)}else{if(/^[a-zA-Z#\.]*(\s?)(.*)[a-zA-Z0-9]$/.test(c)){return D.query(c)[0]}else{return c.toString()}}}},_fixUrl:function(c){return c+(c.indexOf("?")<0?"?_xbox=true":"&_xbox=true")},_getType:function(d){var c;return((c=typeof(d))=="object"?d==null&&"null"||Object.prototype.toString.call(d).slice(8,-1):c).toLowerCase()},_getOptWidth:function(){var c;try{if(parent&&parent.D.get("xbox-iframe")&&(parent.D.get("xbox-iframe").getAttribute("auto-width")>0)){c=parent.D.get("xbox-iframe").getAttribute("auto-width")}else{c=parseInt(this.options.width,10)}}catch(d){c=parseInt(this.options.width,10)}this.options.width=c;return c},_getOptHeight:function(){return parseInt(this.options.height,10)},_getType:function(d){var c;return((c=typeof(d))=="object"?d==null&&"null"||Object.prototype.toString.call(d).slice(8,-1):c).toLowerCase()},_getNiceTop:function(c){var j=D.get(this.cfg.MOCK),j=this.options.type.toLowerCase()=="dom"?j.firstChild:j,g=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,h,f=D.getViewportHeight(),d;if(c){_mH=parseInt((this._getIFRHeight()||D.getStyle(this.cfg.MOCK,"height")),10)}else{_mH=this._getWH(j)[1]}h=f>_mH?(0.382*f-_mH/2):50;h=Math.max(50,h)+g;h=Math.max(50,h);return parseInt(h,10)},_getNiceLeft:function(){var f=D.get(this.cfg.MOCK),c=this._getWH(f)[0],d=(D.getViewportWidth()-5-c)/2;return parseInt(d,10)},_getWH:function(f){var f=typeof f=="string"?document.getElementById(f):f,c,d;if(f.offsetWidth===0||f.offsetHeight===0){var k=f.style.display||"",g=f.style.visibility||"",j;f.style.visibility="hidden";f.style.display="block";j=document.createElement("div");j.style.visibility="hidden";j.appendChild(f.cloneNode(true));document.body.appendChild(j);f=j.firstChild;try{f.style.visibility=g;f.style.display=k;document.body.removeChild(j)}catch(h){}}c=f.offsetWidth>this.options.maxWidth?this.options.maxWidth:f.offsetWidth;d=f.offsetHeight>this.options.maxHeight?this.options.maxHeight:f.offsetHeight;return[f.offsetWidth,f.offsetHeight]},_contentOnLoad:function(f){f.hideLoad.call(f);var c=D.get(this.cfg.MOCK),g=this.options.type.toLowerCase()==="dom"?c:c.firstChild,d=f._getWH(g);D.setStyles(f.cfg.MOCK,{width:(f._getOptWidth()||d[0])+"px"});D.setStyles(f.cfg.MOCK,{top:f._getNiceTop(false)+"px",left:f._getNiceLeft()+"px",visibility:"visible"})},_iframeOnLoad:function(d,c){this.hideLoad();this._fitIFR();D.setStyle(this._mock,"top",this._getNiceTop(true)+"px");D.setStyle(this.cfg.IFRAME,"height",this._getIFRHeight()+"px");if(this.options.autoFit){this._autoFit()}D.setStyle(this._iframe,"visibility","visible");D.setStyle(this._mock,"visibility","visible");if(AP.env.browser.mozilla&&AP.env.browser.v==="1.9.0.15"){if(document.location.host.indexOf("cashier")<1){this.cfg.autoFit=false}D.get(this.cfg.IFRAME).style.height=parseInt(D.get(this.cfg.MOCK).style.height,10)+1+"px"}try{E.on(D.query(".xbox-close-link",D.get(this.cfg.IFRAME).contentWindow.document),"click",function(f){AP.widget.xBox.hide();E.preventDefault(f)})}catch(d){}},_fitIFR:function(){try{var c=D.get(this.cfg.MOCK);D.setStyles(this.cfg.MOCK,{width:this._getOptWidth()+"px",height:this._getIFRHeight()+"px",left:((D.getViewportWidth()-this.options.width)/2)+"px"});D.setStyle(this.cfg.IFRAME,"width",this._getOptWidth()+"px");D.setStyle(this.cfg.IFRAME,"height",this._getIFRHeight()+"px");if(D.getStyle(this.cfg.MOCK,"height")+D.getStyle(this.cfg.MOCK,"top")>D.getViewportHeight()){D.setStyle(this.cfg.MOCK,"top",this._getNiceTop(true)+"px")}}catch(d){}},_autoFit:function(){try{var c=this;if(AP.cache.xbox.timer){clearInterval(AP.cache.xbox.timer)}AP.cache.xbox.timer=setInterval(function(){c._fitIFR()},75)}catch(d){}},_getIFRHeight:function(){if(this.options.cross_domain&&this.options.height){return this.options.height}var g=D.get(this.cfg.IFRAME);try{var d=g.contentWindow.document.body.scrollHeight,h=g.contentWindow.document.documentElement.scrollHeight,f=window.userAgent,c=(f.indexOf("safari")>-1||f.indexOf("chrome")>-1)?Math.min(d,h):Math.max(d,h);if(h-d>100){c=d}if(parseInt(this.options.minHeight,10)>0&&this.options.minHeight>c){c=this.options.minHeight}return c}catch(j){}},_makeContent:function(){switch(this.options.type.toLowerCase()){case"iframe":this.options.load=true;this._iframe=Element.create("iframe",{id:this.cfg.IFRAME,name:this.cfg.IFRAME+new Date().getTime(),frameBorder:"no",scrolling:"no",src:this._fixUrl(this._makeValue()),style:{visibility:"hidden",width:this._getOptWidth()+"px"}});E.on(this._iframe,"load",this._iframeOnLoad,this,true);this._mock.appendChild(this._iframe);break;case"dom":var c=this._makeValue();AP.cache.xbox.DOMParent=c.parentNode;this._mock.appendChild(c);E.onContentReady(this.cfg.MOCK,this._contentOnLoad,this,true);break;case"string":this._mock.innerHTML+=this._makeValue();E.onContentReady(this.cfg.MOCK,this._contentOnLoad,this,true);break;default:break}},renderMock:function(){if(D.get(this.cfg.MOCK)){return}this._mock=Element.create("div",{id:this.cfg.MOCK,"class":this.cfg.MOCK_CLASS,style:{visibility:"hidden",display:""},appendTo:document.body});if(!this.options.border){this._mock.style.border="none"}if(this.options.title&&this.options.title!==""){var c=Element.create("div",{"class":"xbox-caption",innerHTML:this.options.title,appendTo:this._mock})}this._makeContent()},showMock:function(){D.setStyle(this._mock,"visibility","visible")},renderOverlay:function(){var d=this.cfg.OVERLAY;var c=document.body.scrollWidth>document.body.offsetWidth?document.body.scrollWidth:document.body.offsetWidth+50+"px";var f=D.getDocumentHeight();if(!D.get(this.cfg.OVERLAY)){this._overlay=Element.create("div",{id:this.cfg.OVERLAY,"class":this.cfg.OVERLAY_BG,style:{height:f+"px",visibility:"hidden",opacity:"0",filter:"alpha(opacity=0)","-moz-opacity":"0"},appendTo:document.body})}if(AP.fn.browser.msie6){if(this.options.noScroll){}else{c="100%"}D.setStyle(this.cfg.OVERLAY,"height",f);D.setStyle(this.cfg.OVERLAY,"width",c)}if(!D.get(this.cfg.IFRAME_FIX)){this._overlay.innerHTML='<iframe id="'+this.cfg.IFRAME_FIX+'" style="width: '+c+"px; height:"+f+'px" src="javascript:\'\'"></iframe>';d=this.cfg.IFRAME_FIX}if(AP.env.browser.msie&&AP.env.browser.v<8||AP.env.browser.mozilla===true){var g=D.query(".alieditContainer");if(g.length>0){g.forEach(function(h){h.style.visibility="hidden";h.style.opacity="0";h.style.filter="alpha(opacity = 0)";AP.cache.hidePWDEdit=true})}}if(AP.env.browser.mozilla&&AP.env.browser.v==="1.9.1.9"){D.get(this.cfg.IFRAME_FIX).style.display="none"}},showOverlay:function(){var c=this;D.setStyle(this.cfg.OVERLAY,"visibility","visible");var d=new U.Anim(this.cfg.OVERLAY,{opacity:{from:0,to:0.2}},0.3);if(AP.env.browser.msie&&AP.env.browser.v>=9){d.onComplete.subscribe(function(){D.get(c.cfg.OVERLAY).style.opacity=0.2})}if(this.options.type.toLowerCase()==="iframe"){d.onStart.subscribe(function(){c.showLoad()})}d.animate()},hideOverlay:function(){E.removeListener(this.cfg.OVERLAY);var c=new U.Anim(this.cfg.OVERLAY,{opacity:{to:0}},0.2);c.onComplete.subscribe(function(){Element.remove(this.cfg.OVERLAY)});c.animate()},showLoad:function(){if(D.get(this.cfg.LOAD)){return}var c=D.getViewportHeight()*0.382;if(AP.fn.browser.msie6){c+=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}Element.create("div",{id:this.cfg.LOAD,innerHTML:"<img src='"+this.options.loadsrc+"' />",style:{top:c+"px",display:"block"},appendTo:document.body})},hideLoad:function(){if(D.get(this.cfg.LOAD)){Element.remove(this.cfg.LOAD)}},show:function(){var c=this;this.renderOverlay();this.renderMock();this.showOverlay.call(c);if(this.options.onShow){this.options.onShow.call(this)}if(this.options.onShowEvent){this.options.onShowEvent.call(this)}var d=D.query("#xbox-mock .alieditContainer");if(d.length>0){d.forEach(function(f){f.style.visibility="visible";f.style.opacity="1";f.style.filter="alpha(opacity = 1)"})}},hide:a,fire:function(f,c){var d=c||this;AP.cache.xbox.fireObject=f;d.show.call(d,f,d);if(f){E.preventDefault(f)}}});function a(){try{setTimeout(function(){D.setStyles(D.query("div.cal-calendar"),{display:"none"})},0)}catch(h){}if(AP.cache.xbox.timer){clearInterval(AP.cache.xbox.timer)}if(AP.cache.xbox.DOMParent){var d=D.get("xbox-mock").firstChild;if(D.hasClass(d,"xbox-caption")){d=d.nextSibling}AP.cache.xbox.DOMParent.appendChild(d)}try{if(AP.env.browser.msie&&AP.env.browser.v<8||AP.env.browser.mozilla===true){var j=D.query(".alieditContainer");if(j.length>0&&AP.cache.hidePWDEdit){j.forEach(function(k){k.style.visibility="visible";k.style.opacity="1";k.style.filter="alpha(opacity = 100)";AP.cache.hidePWDEdit=true})}}}catch(h){}try{E.removeListener(document,"keyup");E.removeListener("xbox-mock");E.removeListener("xbox-overlay")}catch(h){}var c=D.get("xbox-mock");var g=D.get("xbox-overlay");if(c){document.body.removeChild(c)}if(g){document.body.removeChild(g)}try{if(AP.cache.xbox.onHideEvent){AP.cache.xbox.onHideEvent.call();var f=AP.cache.xbox.onHideEvent}}catch(h){}AP.cache.xbox={};AP.cache.xbox.onHideEvent=f}AP.widget.xBox=b;AP.widget.xBox.hide=a})();AP.pk.pa.counter=function(d){var a=this,b=[],c;this.type=["sms","phone","email"];this.btnDisable="btn-normal-disabled";this.btnAble="btn-normal";this.sec=AP.cache.countdown=60;this.count=d.count||60;this.action=d.action||false;this.text={sms:["重发短信校验码","重新获取短信"],phone:["语音获取校验码","使用语音获取","免费语音获取校验码"],email:["点击重新发送邮件","重新发送邮件"]};this.setMobile=function(f){this.mobilePhone=f};this.initType=function(){this.type.forEach(function(f){if(d.hasOwnProperty(f)){b.push(f)}});return b};this.setCount=function(f){a.sec=AP.cache.countdown=f};this.encode=function(f){if(!/^([0-9]+)[0-9]{4}([0-9]{4})/g.test(f)){return f}return f.replace(/^([0-9]+)[0-9]{4}([0-9]{4})/g,"$1****$2")};this.getLink=function(f){if(parseInt(f)==1){return'（<a href="/user/mobile/modifyMobile.htm">修改号码</a>）'}else{if(parseInt(f)==0){return'（<a href="/user/mobile/bindMobile.htm">修改号码</a>）'}else{return""}}};this.updateText=function(f){var g;if(f==="phone"){g='<p class="t-explain">支付宝向您的手机：'+this.encode(this.mobilePhone)+(d.noChangeLink?"":this.getLink(d.isBind))+'拨打电话并播报校验码。<p class="t-explain"><em>来电号码：057126883721，057185020555。</em>如果2分钟内没接到语音校验码电话，请点击按钮重新获取。</p>'}else{if(f==="sms"){g='<p class="t-explain"><em>6位数字校验码短信</em>已经免费发送到您的手机：'+this.encode(this.mobilePhone)+(d.noChangeLink?"":this.getLink(d.isBind))+'。</p><p class="t-explain">如果1分钟内没有收到校验码短信，请点击按钮重新获取。</p>'}else{if(f==="email"){g='<p class="t-explain">请进入邮箱查收邮件，若无法收到邮件，请点击重新发送邮件。<a href="emailChange.htm">修改Email</a></p>'}}}D.get(d.txtId).innerHTML=d.text||g};this.countdown=function(f){if(this.sec===null){return}if(this.sec===0){this.countDownUI(f,false);D.get(d.txtId).innerHTML=c;D.addClass(D.get(d[f]+"-notice"),"fn-hide");this.sec=AP.cache.countdown;return}this.countDownUI(f,true);this.sec--;clearTimeout(AP.cache.countTimer);AP.cache.countTimer=setTimeout(function(){a.countdown(f)},1000)};this.countDownUI=function(g,f){var f=f===true||false;b.forEach(function(j){var h=D.get(d[j]);if(!f){h.parentNode.className=a.btnAble}else{h.parentNode.className=a.btnDisable}h.disabled=f;h.value=f?"（"+a.sec+"秒后）"+a.text[j][1]:a.text[j][0]})};this.request=function(k){var g=null,h="",l,k=k+"-"+(d.status||"");switch(k){case"email-":h="user/loginName/resendEmail";l={resendType:d.emailType};break;case"email-emailChangeActiveOnSelfhelpprod":h="selfhelp/loginName/resendEmail";l={resendType:d.emailType};break;case"email-activate":h="user/reg/resendEmailToActivate";l={email:d.emailAddress};break;case"phone-bindMobile":h="user/mobile/resendIvrAckCodeToBind";l={mobilePhone:d.mobilePhone};break;case"phone-unbindMobile":h="user/mobile/resendIvrAckCodeToUnBind";l={mobilePhone:d.mobilePhone};break;case"sms-activate":h="user/reg/resendSmsAckCodeToActivate";l={mobilePhone:d.mobilePhone};break;case"sms-bindMobile":h="user/mobile/resendSmsAckCodeToBind";l={mobilePhone:d.mobilePhone};break;case"sms-unbindMobile":h="user/mobile/resendSmsAckCodeToUnBind";l={mobilePhone:d.mobilePhone};break;case"sms-openMobileSwitch":h="user/mobile/resendSmsAckCodeOpenMobileSwitch";l={businessType:d.businessType,mobilePhone:d.mobilePhone};break;case"phone-openMobileSwitch":h="user/mobile/resendSmsAckCodeOpenMobileSwitchIVR";l={businessType:d.businessType,mobilePhone:d.mobilePhone};break;case"sms-modifyMobile":h="user/mobile/resendSmsAckCodeToModify";l={mobilePhone:d.mobilePhone};break;case"sms-newModifyMobile":h="user/mobile/resendSmsAckCodeToNewModify";l={mobilePhone:d.mobilePhone};break;case"sms-":h="user/mobile/resendSmsAckCode";if(typeof d.smsParams=="undefined"){l={businessType:d.businessType,businessId:d.businessId}}else{l={businessType:d.businessType,businessId:d.businessId,smsParams:d.smsParams}}break;case"phone-":h="user/mobile/resendIvrAckCode";l={businessType:d.businessType,businessId:d.businessId};break;case"sms-revokeCert":h="cert/resendSmsAckCodeToRevoke";l={mobilePhone:d.mobilePhone};break;case"sms-updateCert":h="cert/resendSmsAckCodeToUpdate";l={mobilePhone:d.mobilePhone,AckCodeId:d.businessId};break;case"sms-scBindMobile":h="sc/mobile/resendSmsAckCodeToBind";l={mobilePhone:d.mobilePhone};break;case"phone-scBindMobile":h="sc/mobile/resendIvrAckCodeToBind";l={mobilePhone:d.mobilePhone};break;case"sms-stopConvoy":h="sc/mobile/resendSmsAckCodeToStopConvoy";l={mobilePhone:d.mobilePhone};break;case"sms-setConvoyLimit":h="sc/mobile/resendSmsAckCodeToSetConvoyLimit";l={mobilePhone:d.mobilePhone};break;case"phone-stopConvoy":h="sc/mobile/resendIvrAckCodeToStopConvoy";l={mobilePhone:d.mobilePhone};break;case"phone-setConvoyLimit":h="sc/mobile/resendIvrAckCodeToSetConvoyLimit";l={mobilePhone:d.mobilePhone};break;case"sms-sendSMS":h="sc/mobile/resendIvrAckCodeToStopConvoy";l={mobilePhone:a.mobilePhone};break;case"sms-revokeOtpByMobile":h="sc/mobile/reSendSmsAckCodeForRevokeOtp";l={mobilePhone:d.mobilePhone};break;case"sms-applyOtpMobile":h="sc/mobile/reSendSmsAckCodeForApplyOtp";l={mobilePhone:d.mobilePhone};break;case"sms-bindThirdMobile":h="sc/mobile/reSendSmsAckCodeForBindThird";l={mobilePhone:d.mobilePhone};break;case"sms-activateUkeyMobile":h="sc/mobile/reSendSmsAckCodeForActivateUkey";l={mobilePhone:d.mobilePhone};break;case"sms-certBindMobile":h="sc/mobile/reSendSmsAckCodeForBindMobile";l={mobilePhone:d.mobilePhone};break;case"phone-certBindMobile":h="sc/mobile/reSendIvrAckCodeForBindMobile";l={mobilePhone:d.mobilePhone};break;case"sms-certApplyCert":h="sc/mobile/reSendSmsAckCodeForApplyCert";l={mobilePhone:d.mobilePhone};break;case"phone-certApplyCert":h="sc/mobile/reSendIvrAckCodeForApplyCert";l={mobilePhone:d.mobilePhone};break;case"sms-installByMobile":h="sc/mobile/reSendSmsAckCodeForInstallCert";l={mobilePhone:d.mobilePhone};break;case"sms-revokeByMobile":h="sc/mobile/reSendSmsAckCodeForRevokeCert";l={mobilePhone:d.mobilePhone};break;case"sms-security":h="standard/payment/sendAckCodeSms";l={requestId:d.businessId};break;case"phone-security":h="standard/payment/sendAckCodeIvr";l={requestId:d.businessId};break;case"phone-loginFind":h="user/pwdFind/resendQVoiceAckCode";l={logonId:d.logonId};break;case"sms-loginFind":h="user/pwdFind/resendQSmsAckCode";l={logonId:d.logonId};break;case"phone-payFind":h="user/pwdFind/resendPVoiceAckCode";l={logonId:d.logonId};break;case"sms-payFind":h="user/pwdFind/resendPSmsAckCode";l={logonId:d.logonId};break;case"email-loginFind":h="user/pwdFind/resendQEmail";l={logonId:d.logonId,method:d.emailType,email:d.emailAddress};break;case"email-payFind":h="user/pwdFind/resendPEmail";l={logonId:d.logonId,method:d.emailType,email:d.emailAddress};break;case"sms-modifyEmailAcct":h="user/loginName/unlongin/changeEmailResendAckCode";l={logonId:d.logonId,mobilePhone:d.mobilePhone};break;case"email-modifyEmailAcct":h="user/loginName/unlongin/changeEmailResendEmail";l={logonId:d.logonId};break;case"phone-loginFindSelfHelp":h="selfhelp/pwdFind/resendQVoiceAckCode";l={logonId:d.logonId};break;case"sms-loginFindSelfHelp":h="selfhelp/pwdFind/resendQSmsAckCode";l={logonId:d.logonId};break;case"phone-payFindSelfHelp":h="selfhelp/pwdFind/resendPVoiceAckCode";l={logonId:d.logonId};break;case"sms-payFindSelfHelp":h="selfhelp/pwdFind/resendPSmsAckCode";l={logonId:d.logonId};break;case"email-loginFindSelfHelp":h="selfhelp/pwdFind/resendQEmail";l={logonId:d.logonId,method:d.emailType,email:d.emailAddress};break;case"email-payFindSelfHelp":h="selfhelp/pwdFind/resendPEmail";l={logonId:d.logonId,method:d.emailType,email:d.emailAddress};break;case"sms-modifyEmailAcctSelfHelp":h="selfhelp/loginName/unlongin/changeEmailResendAckCode";l={logonId:d.logonId,mobilePhone:d.mobilePhone};break;case"email-modifyEmailAcctSelfHelp":h="selfhelp/loginName/unlongin/changeEmailResendEmail";l={logonId:d.logonId};break;case"sms-modifyEmailAcctOnSelfhelpprod":h="selfhelp/loginName/unlongin/changeEmailResendAckCode";l={logonId:d.logonId,mobilePhone:d.mobilePhone};break;case"email-modifyEmailAcctOnSelfhelpprod":h="selfhelp/loginName/unlongin/changeEmailResendEmail";l={logonId:d.logonId};break;case"sms-snsCheckCodeQ":h="sns/reSendCheckCode";l={mobile:d.mobilePhone,isSendAgain:"true"};break;case"phone-couponValiCode":h="coupon/mobile/resendIvrAckCode";l={mobilePhone:d.mobilePhone,businessId:d.businessId,businessType:d.businessType,resultCode:d.resultCode};break;case"sms-couponValiCode":h="coupon/mobile/resendSmsAckCode";l={mobilePhone:d.mobilePhone,businessId:d.businessId,businessType:d.businessType,resultCode:d.resultCode};break;case"sms-lifeGetCheckCodeQ":h="life/mobile/getCheckCodeQ";l={mobile:d.mobilePhone};break;case"sms-aaCheckCodeQ":h="transfer/mobile/getCheckCodeQ";l={mobile:d.mobilePhone,isSendAgain:"true"};break;case"sms-fundpayCheckCode":h="trade/account/sendSMSCode";break;case"phone-fundpayCheckCode":h="trade/account/sendIVRCode";break;case"sms-airmng-security":h="/security/9002/900203/product.json";l={mobilePhone:d.mobilePhone,templateId:d.businessId};break;case"phone-airmng-security":h="/security/9002/900203/product.json";l={mobilePhone:d.mobilePhone,templateId:d.businessId};break;case"email-messageResendEmail":h="messager/channel/modifyEmail/resendEmail";l={};break;case"sms-morderprod":h="order/validateCode";l={action:"sendMobileValidateCode",mobile:d.mobilePhone};break;case"phone-morderprod":h="order/validateCode";l={action:"sendIvrValidateCode",mobile:d.mobilePhone};break;case"sms-authcenterQ":h="login/mobile/getCheckCodeQ";l={mobile:d.mobilePhone};break;case"sms-katongQReg":h="user/reg/resendSmsAckCodeToActivate";l={mobilePhone:d.mobilePhone};break;case"phone-katongQReg":h="user/reg/mobile/resendIvrAckCodeToActivate";l={mobilePhone:d.mobilePhone};break;case"sms-acCheckCodeQ":h="transfer/mobile/getAcCheckCodeQ";l={mobile:d.mobilePhone,isSendAgain:"true"};break;case"sms-directpay":h="directpay/mobile/getCheckCodeQ";l={mobile:d.mobilePhone,isSendAgain:"true"};break;case"sms-selfhelpTask":h="task/mobileChange/resendSmsAckCode";l={mobilePhone:d.mobilePhone,cardNo:d.businessId};break;case"phone-selfhelpTask":h="task/mobileChange/resendPhoneAckCode";l={mobilePhone:d.mobilePhone,cardNo:d.businessId};break}var f=d.domain&&d.domain.indexOf(".alipay.")>-1?d.domain:AP.PageVar.app_domain;if(typeof d.resend_ackcode_url!="undefined"){h=d.resend_ackcode_url;l=d.params;l.type=k;f=""}if(h){var j=new AP.core.api(h,{api_url:f,method:"POST",cache:false,format:"jsonp",onAPISuccess:function(n,m){}},this);j.call(l)}};this.fireEvent=function(h,f,g){if(f==="phone"){a.setCount(120)}else{a.setCount(60)}if(d.beforeCountEvent){if(d.beforeCountEvent.call(a)==false){return false}}a.countdown(d[f]);a.request(f);if(!d.noUpdateText){a.updateText(f)}if(D.get(d[f]+"-notice")){D.addClass(d[f]+"-notice","fn-hide")}};this.init=function(f){c=D.get(f.txtId)&&D.get(f.txtId).innerHTML||"";this.setMobile(f.mobilePhone);this.request=f.request||this.request;this.initType();b.forEach(function(g){D.get(f[g]).disabled=false;E.on(f[g],"click",a.fireEvent,g,this);if(g==="phone"){E.on(f[g],"mouseover",function(){D.removeClass(f[g]+"-notice","fn-hide")});E.on(f[g],"mouseout",function(){D.addClass(f[g]+"-notice","fn-hide")})}if(g==="sms"||g==="email"){a.setCount(60);if(!f.auto||f.auto==false){a.countdown(g)}}})};this.fire=function(f){if(["sms","phone","email"].has(f)){a.countdown(f)}};this.restart=function(g,f){this.sec=60;AP.cache.countdown=60;clearTimeout(AP.cache.countTimer);b.forEach(function(j){var h=D.get(d[j]);h.parentNode.className=a.btnAble;h.disabled=false;h.value=a.text[j][0]});a.fireEvent(g,f)};this.init(d)};AP.widget.popNotice=new AP.Class({setOptions:function(a){return AP.hashExtend({pop_class:"pop-info",pop_id:"J_popContainer",message:"no message",click:false,offset:[0,0],customEvent:false,styles:{},onshow:function(){},onhide:function(){}},a||{})},initialize:function(a,b){this.options=this.setOptions(b);this.current_el=null;if(D.get("J_popContainer")){this.pop=D.get("J_popContainer");this.pop_b=D.get("J_popBottom")}else{this.pop=this.getBuildDom();this.pop_b=this.getBuildBottomEl()}this.bodyBindEvent();this.setStyles(this.options.styles);if(a){this.bindEvents(a)}this.targets=a;this.onShowEvent=new U.CustomEvent("onShowEvent");this.onHideEvent=new U.CustomEvent("onHideEvent");this.onShowEvent.subscribe(this.options.onshow,this,true);this.onHideEvent.subscribe(this.options.onhide,this,true)},bindEvents:function(a){if(this.options.customEvent){return}a.forEach(function(b){if(this.options.click){E.on(b,"click",this.show,b,this)}else{E.on(b,"mouseover",this.show,b,this);E.on(b,"mouseout",this.mouseHiddenEvent,b,this)}},this);if(!this.options.click){E.on(this.pop,"mouseout",this.mouseHiddenEvent,"",this);E.on(this.pop_b,"mouseout",this.mouseHiddenEvent,"",this)}},mouseHiddenEvent:function(c){try{var b=E.getTarget(c);var a=E.getRelatedTarget(c);if(D.query("*",this.pop).contains(a)||a==this.pop||a==this.current_el||a==this.pop_b){return}}catch(c){}this.hide()},setPosition:function(b){var g=D.getRegion(this.pop);var d=g.bottom-g.top;var f=g.right-g.left;var c=D.getRegion(b);var a=c.left+this.options.offset[0];var h=c.top-d-3;D.setStyles(this.pop_b,{height:d+5+"px",width:f+"px"});D.setXY(this.pop,[a,h]);D.setXY(this.pop_b,[a,h])},show:function(b,a){this.current_el=a;if(D.get("J_popContainer")===null){this.pop=this.getBuildDom();this.pop_b=this.getBuildBottomEl();this.setStyles(this.options.styles)}D.removeClass(this.pop,"fn-hide");D.removeClass(this.pop_b,"fn-hide");if(!this.options.click){E.on(this.pop,"mouseout",this.mouseHiddenEvent,"",this);E.on(this.pop_b,"mouseout",this.mouseHiddenEvent,"",this)}this.innerMessage();this.setPosition(a);this.onShowEvent.fire({trigger:a,pop:this.pop})},innerMessage:function(){if(D.query(".pop_extend_txt",this.current_el).length){var b=D.query(".pop_extend_txt",this.current_el)[0]}else{var b=D.query(".pop_extend_txt",this.current_el.parentNode)[0]}if(b){var a=b.innerHTML}else{var a=this.options.message}D.query(".container",this.pop)[0].innerHTML=a},bodyBindEvent:function(){E.on(document.body,"click",function(d){var b=E.getTarget(d);var a=D.query("*",this.pop);var f=false;a.forEach(function(c){if(c==b){f=true}});if(b.parentNode==this.pop||b==this.current_el||f){return}this.hide(d)},"",this)},hide:function(){if(this.options.click){D.addClass(this.pop,"fn-hide");D.addClass(this.pop_b,"fn-hide")}else{try{this.pop.parentNode.removeChild(this.pop)}catch(a){}try{this.pop_b.parentNode.removeChild(this.pop_b)}catch(a){}}this.onHideEvent.fire()},setStyles:function(a){if(D.query(".container",this.pop).length>0){D.setStyles(D.query(".container",this.pop)[0],a)}},getBuildDom:function(){var a='<div class="container"></div><div style="left: 20px;" class="angle"/>';var b=Element.create("div",{innerHTML:a,appendTo:document.body,id:this.options.pop_id,"class":"fn-hide"});D.addClass(b,this.options.pop_class);return b},getBuildBottomEl:function(a){var b=Element.create("div",{appendTo:document.body,id:"J_popBottom","class":"fn-hide"});D.setStyles(b,{position:"absolute","z-index":"488"});return b}});AP.widget.seniorPop=AP.widget.popNotice.extend({show:function(c,b,a){if(D.get("J_popContainer")===null){this.pop=this.getBuildDom();this.pop_b=this.getBuildBottomEl();this.setStyles(this.options.styles)}D.removeClass(this.pop,"fn-hide");D.removeClass(this.pop_b,"fn-hide");this.current_el=b;var a=a||{};if(a.hideAngle){this.hideAngle()}else{this.showAngle()}if(!this.options.click){E.on(this.pop,"mouseout",this.mouseHiddenEvent,"",this);E.on(this.pop_b,"mouseout",this.mouseHiddenEvent,"",this)}this.innerMessage();this.setPosition(b,a);this.onShowEvent.fire({trigger:b,pop:this.pop})},hideAngle:function(){D.addClass(D.query(".angle",this.pop)[0],"fn-hidden")},showAngle:function(){D.removeClass(D.query(".angle",this.pop)[0],"fn-hidden")},setPosition:function(b,a){var d=D.getRegion(this.pop);var c=D.getRegion(b);if(a.center){var f=this.remoteCenter(d)}else{var f=this.remoteXY(d,c)}D.setXY(this.pop,f);D.setXY(this.pop_b,f)},remoteCenter:function(f){var b=f.bottom-f.top;var d=f.right-f.left;var c=D.getViewportWidth();var h=D.getViewportHeight();var a=c/2-d/2;var g=h/2-b/2;return[a,g]},remoteXY:function(f,c){var b=f.bottom-f.top;var d=f.right-f.left;var a=c.left+this.options.offset[0];var g=c.top-b-3;this.setStyles(this.options.styles);D.removeClass(D.query(".angle",this.pop)[0],"angle-top");D.setStyles(D.query(".angle",this.pop)[0],{left:"20px",right:"auto"});if(b>(c.top-D.getDocumentScrollTop())){g=c.bottom+10;D.addClass(D.query(".angle",this.pop)[0],"angle-top")}if((a+d)>D.getViewportWidth()){D.setStyles(D.query(".angle",this.pop)[0],{left:"auto",right:"20px"});a=c.right-d-this.options.offset[0]}D.setStyles(this.pop_b,{height:b+5+"px",width:d+"px"});return[a,g]}});(function(){if(typeof window.AlieditControl!="object"){window.AlieditControl={}}var q=window.AlieditControl;var o=document.domain.split(".");if(o.length>1){var a=o[o.length-2]+"."+o[o.length-1];document.domain=a}var d=document,j=window,f=false,m=false,b={};try{if(window.top.document.body){d=window.top.document;var l=null;do{j=j.parent;l=j.document.getElementsByTagName("iframe");b=j.frameElement!=null?j.frameElement:{};for(var r=0,t=l.length;r<t;r++){if(location.href==l[r].src&&(/xbox/i.test(l[r].name)||/xbox/i.test(l[r].id)||/xbox/i.test(b.id)||/xbox/i.test(b.name))){f=true;break}}}while(j!=window.top)}}catch(u){m=true}var n=function(){var w=[];setInterval(function(){if(!window.Tracker||!w.length){return}n(w.shift())},100);return function(y){if(window.Tracker){var x=Tracker.minInterval;Tracker.minInterval=0;Tracker.click(y);Tracker.minInterval=x}else{w.push(y)}}}();if(!Array.prototype.forEach){Array.prototype.forEach=function(y,z){var w=this.length;for(var x=0;x<w;x++){y.call(z,this[x],x,this)}}}q.on=function(x,w,y){if(x.addEventListener){x.addEventListener(w,y,false)}else{if(x.attachEvent){x.attachEvent("on"+w,y)}else{x["on"+w]=y}}};q.preventDefault=function(w){if(window.event){window.event.returnValue=false}else{if(w&&w.preventDefault){w.preventDefault()}}return false};q.automatic=true;q.dom={getElementsByAttr:function(x,F,w,C){var C=C||document;var y=C.getElementsByTagName(w||"*");var z=[];for(var A=0;A<y.length;A++){switch(x){case"class":var B=new RegExp("(?:^|\\s+)"+F+"(?:\\s+|$)");if(B.test(y[A].className)){z.push(y[A])}break;default:if(y[A].getAttribute(x)==F){z.push(y[A])}break}}return z},get:function(w){return d.getElementById(w)||null},create:function(w,y){var x=d.createElement(w);if(y===null){return x}for(p in y){if(p=="class"||p=="className"){x.className=y[p]}else{if(p=="style"){for(s in y[p]){x.style[s]=y[p][s]}}else{if(p==="innerHTML"){x.innerHTML=y[p]}else{if(p==="appendTo"){y[p].appendChild(x)}else{if(p==="append"){x.appendChild(y[p])}else{x.setAttribute([p],y[p])}}}}}}return x}};q.doc=function(){var x=self.innerWidth,w=self.innerHeight,y=d.compatMode;if(y||q.env.isIE){if(y=="CSS1Compat"){x=d.documentElement.clientWidth;w=d.documentElement.clientHeight}else{x=d.body.clientWidth;w=document.body.clientHeight}}return{maxWidth:Math.max(d.documentElement.clientWidth,d.body.scrollWidth,d.documentElement.scrollWidth,d.body.offsetWidth,d.documentElement.offsetWidth),maxHeight:Math.max(d.documentElement.clientHeight,d.body.scrollHeight,d.documentElement.scrollHeight,d.body.offsetHeight,d.documentElement.offsetHeight),clientWidth:x,clientHeight:w}};q.cookie={set:function(x,y,w){var z=x+"="+encodeURIComponent(y);if(w){var A=new Date();A.setTime(A.getTime()+w);z+="; expires="+A.toGMTString()}if(!/undefined/.test(a)){z+="; domain=."+a}document.cookie=z},get:function(w){if(!navigator.cookieEnabled){return""}var x=new RegExp("(?:; )?"+w+"=([^;]*);?");return x.test(document.cookie)?decodeURIComponent(RegExp["$1"]):null},remove:function(w){this.set(w,"",new Date(0))}};function c(y,w){var A,x=/\/\/img/.test(y);if(location.protocol=="http:"){if(x){A="http:"+y.slice(y.indexOf("//")).replace(/\.alipay.com/,".alipay.net")}else{if(arguments.length==2){var z=/^(https?:\/\/)(([\w_]+\.)+\w+)\/?/gi;A="http:"+y.slice(y.indexOf("//")).replace(z.exec(y)[2],w+location.hostname.slice(location.hostname.indexOf(".")))}else{A="http:"+y.slice(y.indexOf("//")).replace(/\.alipay.com/,location.hostname.slice(location.hostname.indexOf(".")))}}}else{if(location.protocol=="https:"){A=y}}return(A)}q.debug=/debugger;/.test(location.href);q.log=function(w){if(window.console&&console.log&&q.debug){console.log(w)}};function k(w){return parseInt(w.split(".").join(""),10)}q.randomDownload=false;q.minVersion="2.4.0.1";q.minVersionNum=k(q.minVersion);q.rcVersion="2.4.0.2";q.rcVersionNum=k(q.rcVersion);q.cfg={MOCK:"aliedit-xbox",IFRAME:"aliedit-iframe",OVERLAY:"aliedit-box-shadow",LOAD:"aliedit-load",loadsrc:"https://img.alipay.com/global/loading.gif",ifrsrc:c("https://securitycenter.alipay.com/sc/aliedit/xbox.htm")};q.URL={win:c("https://download.alipay.com/sec/edit/aliedit.exe"),mac:{safari:c("https://download.alipay.com/aliedit/wkaliedit/1002/wkaliedit.dmg")},linux:c("https://download.alipay.com/alipaysc/linux/aliedit/1.0.3.20/aliedit.tar.gz")};q.env=(function(){var B=function(F){return Object.prototype.toString.apply(F)==="[object Function]"},A=navigator.userAgent?navigator.userAgent.toLowerCase():"",w=navigator.platform||"",z={browser:[{identity:"360浏览器",alias:"360",matchMode:function(){if(!C.isWin){return false}try{if(window.external&&external.twGetRunPath){var F=external.twGetRunPath();return F&&F.toLowerCase().indexOf("360se")>-1}else{return false}}catch(G){return false}}},{identity:"Maxthon",alias:"Maxthon",matchMode:function(){if(!C.isWin){return false}try{return window.external&&external.max_version}catch(F){return false}}},{identity:"Chrome",alias:"Chrome",matchMode:function(){return/webkit/.test(A)&&/chrome\/([\d.]+)/.test(A)}},{identity:"Safari",alias:"Safari",matchMode:function(){return/webkit/.test(A)&&!C.isChrome&&/version\/([\d.]+)/.test(A)}},{identity:"Opera",alias:"Opera",matchMode:/(opera)(?:.*version)?[ \/]([\w.]+)/},{identity:"Internet Explorer",alias:"IE",matchMode:/(msie) ([\w.]+)/},{identity:"Firefox",alias:"Firefox",matchMode:function(){return A.indexOf("compatible")<0&&A.indexOf("gecko")>-1&&A.indexOf("khtml")===-1}}],OS:[{identity:"Windows XP",alias:"WinXP",string:A,matchMode:/windows nt 5.1|windows xp/},{identity:"Windows 7",alias:"Win7",string:A,matchMode:/windows nt 6.1|windows 7/},{identity:"Windows Vista",alias:"WinVista",string:A,matchMode:/windows nt 6.0|windows vista/},{identity:"Windows 2000",alias:"Win2K",string:A,matchMode:/windows nt 5.0|windows 2000/},{identity:"Windows",alias:"Win",string:w,matchMode:/Win/},{identity:"MacOS",alias:"Mac",string:w,matchMode:/Mac/},{identity:"Linux",alias:"Linux",string:w,matchMode:/Linux/}]},y=function(L){for(var K=0,I=L.length;K<I;K++){if(B(L[K]["matchMode"])){if(L[K]["matchMode"]()){C["is"+L[K]["alias"]]=true;return L[K]["identity"]}}else{var H=L[K]["matchMode"].exec(A)||[],G=H[1],F=H[2];if(G){var J=L[K]["alias"];C["is"+J]=true;if(F!=="0"){F=parseInt(F,10);C["is"+J+F]=true;return L[K]["identity"]+" "+parseInt(F,10)}else{return L[K]["identity"]}}}}return""},x=function(I){for(var H=0,F=I.length;H<F;H++){if(I[H]["matchMode"].test(I[H]["string"])){var G=I[H]["alias"];C["is"+G]=true;if(/win/i.test(G)){C.isWin=true}return I[H]["identity"]}}return""},C={};C.OS=x(z.OS);C.browser=y(z.browser);if(C.isIE&&/Win64; x64;/i.test(A)){C.is64IE=true}return C})();q.src=(function(){var w=null;if(q.env.isWin){w=q.URL.win}else{if(q.env.isMac){if(q.env.isSafari&&navigator.userAgent.toLowerCase().match(/version\/(\d+\.\d+)/)[1]>=5){w=q.URL.mac.safari}}else{if(q.env.isLinux){if(q.env.isFirefox||q.env.isChrome||q.env.isOpera){w=q.URL.linux}}}}return w})();q.updateSrc=function(w){q.src=q.URL.win;q.log("update url ok:"+q.src)};q.getAlieditObj=function(){if(window.ActiveXObject){try{return(new ActiveXObject("Aliedit.EditCtrl"))}catch(w){}}else{return navigator.plugins["Alipay security control"]||navigator.plugins["Aliedit Plug-In"]||navigator.plugins.Aliedit||null}return null};var v=q.getAlieditObj();q.installedAliedit=v?true:false;q.getVersion=function(y){var z=y||v,w="";try{w=z.alieditVersion()}catch(x){q.log("get ver err:"+x)}return w};q.val=function(w){return w&&w.TextData?w.TextData:null};q.getAliedit=function(){var x=null;var y=arguments[0];if(y&&typeof(y)=="string"){return document.getElementById(y)||document.getElementById(y+(window.ActiveXObject?"_ie":"_noie"))||null}var w=(y&&y.nodeName&&typeof(y)=="object")?y:document;if(window.ActiveXObject){x=q.dom.getElementsByAttr("classid","clsid:488A4255-3236-44B3-8F27-FA1AECAA8844","object",w)}else{x=q.dom.getElementsByAttr("type","application/aliedit","embed",w)}return x};q.getAlieditId=q.getAliedit;q.getAlieditJson=function(){var y,x={},A=q.getAliedit(arguments);for(var w=A.length,z=0;z<w;z++){y=A[z].name.slice(0,A[z].name.lastIndexOf("_"));x[y]=A[z]}return x};q.tips=function(x,w){x.innerHTML='<a href="'+q.cfg.ifrsrc+'" class="aliedit-install J_aliedit_xbox_link" seed="ac-link-tips">请点此安装控件</a>';setTimeout(function(){q.log("tips...");var B=document.getElementById("aliedit-tips");if(!B){if(w=="update"){B=document.createElement("span");B.className="aliedit-tips aliedit-tips-update"}else{B=document.createElement("a");B.href=q.cfg.ifrsrc;B.seed="ac-link-intro";B.className="aliedit-tips";q.on(B,"click",function(C){q.detectAliedit();q.preventDefault(C)})}B.id="aliedit-tips";x.appendChild(B);var z=d.head||d.getElementsByTagName("head")[0]||d.documentElement,y=z.getElementsByTagName("link");if(B.offsetHeight!=37){var A=d.createElement("link");A.setAttribute("charset","utf-8");A.setAttribute("rel","stylesheet");A.setAttribute("href","https://static.alipay.com/al/out.alice.alieditcontrol-1.1.css");z.appendChild(A);n("ac-nocss")}}q.on(document.body,"click",function(H){var F=window.event||H;var C=F.srcElement||F.target;var G=q.dom.get("aliedit-tips");G&&(C.id!="aliedit-tips")&&(G.className="fn-hide")})},1500)};q.container=function(x){var w=q.dom.getElementsByAttr("class","alieditContainer","span");if(w[0]){w.forEach(function(z,y){x.apply(z,arguments)})}};q.UI=function(){var x=q.getAliedit(),z=1,B=false,A=v,y,w=q.getVersion(A);if(w==""){y=0}else{y=k(w)}q.container(function(F){var C=location.href;if(/(?:auth|authcenter)\.(?:d\d\.)?alipay\.(?:com|net)\/login\/certCheck\.htm/.test(C)){return}var P=q.cookie.get("ac_stat"),M=location.pathname;if(A){var Q=F.getAttribute("rel");if(Q&&Q=="true"){q.log("rel : true");B=true}if(P=="no"){q.cookie.set("ac_stat","success",365*24*60*60*1000);n("ac-success")}}else{var L=new Image();L.src=q.cfg.loadsrc;q.installedAliedit=false;q.tips(F);n("acunstall");if(P==null||P=="success"){q.cookie.set("ac_stat","no",365*24*60*60*1000);n("ac-no")}if(M&&/payment\/cashier\.htm/.test(M)){n("ac-no-cashier")}}var O=function(S){try{S.PasswordMode=0}catch(R){n(q.env.browser+"-alieditBox-password-error")}if(S.PasswordMode!==0&&z<20){z++;window.setTimeout(O,300)}};if(window.ActiveXObject){if(A){q.log("cver："+y+" lver："+q.minVersionNum);if(q.env.isWin7||q.env.isVista){if(y==q.rcVersionNum){q.installedAliedit=false;q.needUpdate=true;q.tips(F,"update")}else{q.installedAliedit=true;q.log("update："+B)}}else{if((y<q.minVersionNum)&&B){q.installedAliedit=false;q.log("update url");q.updateSrc(true);q.needUpdate=true;q.log("hilight of ver lower");q.tips(F,"update")}else{q.installedAliedit=true;q.log("update："+B)}}}}else{var N=q.dom.getElementsByAttr("classid","clsid:488A4255-3236-44B3-8F27-FA1AECAA8844","object",document),I=[];outerloop:for(var K=0,J=N.length;K<J;K++){I=N[K].getElementsByTagName("param");for(var H=0,G=I.length;H<G;H++){if(I[H].name=="PasswordMode"&&I[H].value=="0"){O(x[K]);break outerloop}}}}})};q.dialog=function(){var y=d.getElementById(q.cfg.MOCK),z=d.getElementById(q.cfg.OVERLAY),C=q.doc();if(!y){if(!z){var A=C.maxHeight,x=C.maxWidth;z=q.dom.create("div",{id:q.cfg.OVERLAY,"class":q.cfg.OVERLAY,innerHTML:"<iframe src=\"javascript:''\"></iframe>",style:{width:x+"px",height:A+"px",overflow:"hidden",visibility:"hidden"},appendTo:d.body});if(q.env.isIE&&!v&&!(q.env.isVista&&q.env.isIE7)&&!q.env.is64IE){window.setTimeout(function(){z.childNodes[0].src=q.src},500)}}}d.getElementById(q.cfg.OVERLAY)["style"].visibility="visible";var B=q.dom.create("div",{id:q.cfg.LOAD,"class":q.cfg.LOAD,innerHTML:'<img src="'+q.cfg.loadsrc+'">',style:{left:(C.clientWidth-50)/2+"px",top:(C.clientHeight-50)/2+"px",position:"absolute"},appendTo:d.body});y=q.dom.create("div",{id:q.cfg.MOCK,"class":q.cfg.MOCK,style:{left:(C.clientWidth-684)/2+"px",top:(C.clientHeight-394)/2+"px",visibility:"hidden"},appendTo:d.body});var F=q.dom.create("iframe",{id:q.cfg.IFRAME,frameBorder:"no",scrolling:"no",src:q.cfg.ifrsrc,appendTo:y});q.iframeHasCreated=true;window.setTimeout(function(){if(q.automatic){if(d.getElementById(q.cfg.MOCK)){d.body.removeChild(y)}if(d.getElementById(q.cfg.OVERLAY)){d.body.removeChild(z)}if(d.getElementById(q.cfg.LOAD)){d.body.removeChild(B)}}},3500)};q.detectAliedit=function(x){if(!q.installedAliedit){try{if(m||f){if(q.src){alert("您还未安装密码安全控件，安装后即可输入密码。");location.href=q.src}else{alert("您现在所用的浏览器，暂不支持安全控件。")}return false}q.dialog()}catch(w){if(q.src){alert("您还未安装密码安全控件，安装后即可输入密码。");location.href=q.src}else{alert("您现在所用的浏览器，暂不支持安全控件。")}}return false}return true};function h(y){var w=y.getElementsByTagName("*");for(var x=0;x<w.length;x++){if(w[x].type=="submit"){return w[x];break}}return null}q.bindEvent=function(){var y=q.dom.getElementsByAttr("class","J_aliedit_xbox_link","a");y[0]&&y.forEach(function(z){q.on(z,"click",function(A){q.detectAliedit();q.preventDefault(A)})});var x=q.dom.getElementsByAttr("class","alieditDownLink","a");x[0]&&x.forEach(function(z){q.on(z,"click",function(){if(!q.src){q.detectAliedit();return false}else{z.href=q.src}})});var w=q.getAliedit();w[0]&&w.forEach(function(A,z){A.form&&q.on(A,"keydown",function(F){try{if(F.keyCode==13){var B=h(A.form);B?B.click():null}}catch(C){}})})};q.checkService=function(G){if(window.ActiveXObject){switch(G){case"PCID":var A=q.dom.getElementsByAttr("name","REMOTE_PCID_NAME","input")[0];if(A&&A.value!=""){try{var w=new ActiveXObject("alim.webmod");var F=w.ci4();var H=w.ciraw();var x=q.dom.getElementsByAttr("name",A.value,"input");if(x.length>0){x.forEach(function(K,J){K.value=H})}}catch(B){q.log(B)}}break;case"PTA":var C=q.dom.getElementsByAttr("name","PTA_SN","input");if(C[0]&&C[0].value!=""){var z=C[0].value;try{var I=new ActiveXObject("PTA.iTrusPTA");if(parseInt(z.substr(0,1),16)>8){z="00"+z}var y=I.Filter;y.Clear();y.SerialNumber=z;if(I.MyCertificates.Count<=0){y.Clear();y.SerialNumber=z;C.forEach(function(L,K){var J=q.dom.getElementsByAttr("class","alieditContainer","span",L.form);J.forEach(function(O,N){O.style.width="0px";O.style.height="0px";O.style.overflow="fn-hide";var M=q.getAliedit(O)[0];if(M){M.style.width="0px";M.style.height="0px"}})});var x=q.dom.getElementsByAttr("class","promptText_PTA","span");if(x.length>0){x.forEach(function(K,J){K.style.display="inline"})}}}catch(B){q.log(B)}}break}}};var g={readyList:null,DOMContentLoaded:null,class2type:{"[object Function]":"function","[object Array]":"array"},type:function(w){return w==null?String(w):this.class2type[Object.prototype.toString.call(w)]||"object"},doScrollCheck:function(){if(g.isReady){return}try{document.documentElement.doScroll("left")}catch(w){setTimeout(g.doScrollCheck,1);return}g.ready()},_Deferred:function(){var z=[],A,x,y,w={done:function(){if(!y){var C=arguments,F,I,H,G,B;if(A){B=A;A=0}for(F=0,I=C.length;F<I;F++){H=C[F];G=g.type(H);if(G==="array"){w.done.apply(w,H)}else{if(G==="function"){z.push(H)}}}if(B){w.resolveWith(B[0],B[1])}}},resolveWith:function(F,B){if(!y&&!A&&!x){B=B||[];x=1;var C=window.ACReadyList||[];try{while(z[0]){z.shift().apply(F,B)}while(C.length){C.shift().apply(document)}}finally{A=[F,B];x=0;q.readyState=true}}},resolve:function(){w.resolveWith(this,arguments);return this},isResolved:function(){return !!(x||A)},cancel:function(){y=1;z=[];return this}};return w},ready:function(w){if((w===true)||(w!==true&&!g.isReady)){if(!document.body){return setTimeout(g.ready,1)}g.isReady=true;g.readyList.resolveWith(document)}},bindReady:function(){if(this.readyList){return}this.readyList=this._Deferred();if(document.readyState==="complete"){return setTimeout(g.ready,1)}if(document.addEventListener){document.addEventListener("DOMContentLoaded",this.DOMContentLoaded,false);window.addEventListener("load",this.ready,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",this.DOMContentLoaded);window.attachEvent("onload",this.ready);var w=false;try{w=window.frameElement==null}catch(x){}if(document.documentElement.doScroll&&w){this.doScrollCheck()}}}}};if(document.addEventListener){g.DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",this.DOMContentLoaded,false);g.ready()}}else{if(document.attachEvent){g.DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",g.DOMContentLoaded);g.ready()}}}}q.domReady=function(w){g.bindReady();g.readyList.done(w)};q.init=function(){q.log("detecting aliedit...");q.UI();q.log("bind event...");q.bindEvent();q.log("PTA PCID...");q.checkService("PTA");q.checkService("PCID")};q.domReady(q.init)})();securityProduct=function(){var g,c=false;var l={cuForm:{},needValidate:true,isValidate:true,isScPro:false,pwdUrl:"",scProUrl:"",aliedit:{isExist:true,isObjectExistFlag:".alieditContainer",isInputExistFlag:".standardPwdContainer",parent:"J_alieditItem",className:".ui-fm-explain",errorClass:".ui-fm-error",hidnFlag:"J_aliedit_key_hidn",isAliedit:"J_aliedit_using"},alieditName:"",mobile:{isExist:true,isExitFlag:".tip-voice-container",inputId:"ackcode"},otp:{isExist:true,isExitFlag:"J_otpPassword"},certSign:{isExist:true,isExitFlag:"J_signedData"},scProError:{isExist:true,isExitFlag:"J_scProError"},extraAjaxParams:{},ajaxType:"POST",loadingBar:".ui-fm-status",formItemError:"ui-fm-error",formItemExplain:".ui-fm-explain"};var k;var f=function(){k=D.query(l.loadingBar,l.cuForm)[0];D.removeClass(k,"fn-hide")};var d=function(){D.addClass(k,"fn-hide")};var h=function(m){if(!AP.env.browser.msie){console.log(m)}};var j=function(m){if(!m){return""}m=m.replace(/&gt;/g,">");m=m.replace(/&lt;/g,"<");m=m.replace(/&amp;/g,"&");m=m.replace(/&quot;/g,'"');m=m.replace(/&#039;/g,"'");return m};var a={set:function(o,r,n){var q=document.domain.split("."),m=q[q.length-2]+"."+q[q.length-1],t=o+"="+encodeURIComponent(r);if(n){var u=new Date();u.setTime(u.getTime()+n);t+="; expires="+u.toGMTString()}if(!(/undefined/).test(m)){t+="; domain=."+m}document.cookie=t},get:function(m){if(!navigator.cookieEnabled){return""}var n=new RegExp("(?:; )?"+m+"=([^;]*);?");return n.test(document.cookie)?decodeURIComponent(RegExp["$1"]):null},remove:function(m){this.set(m,"",new Date(0))}};var b=function(){var m=[];setInterval(function(){if(!window.Tracker||!m.length){return}b(m.shift())},100);return function(o){if(window.Tracker){var n=Tracker.minInterval;Tracker.minInterval=0;Tracker.click(o);Tracker.minInterval=n}else{m.push(o)}}}();return{init:function(m,n){g=this;this.setOption(m,n);this.startValidate()},startValidate:function(m){l.isValidate=true;g.checkState();g.resetSecurityProState();g.catchData();if(!l.needValidate&&l.isValidate){g.formSucc()}else{g.validate()}},setOption:function(m,n){var q=this.makeMap("aliedit,mobile,otp,certSign,scProError");for(var o in m){if(q[o]){l[o]=this.hash_extend(l[o],m[o])}else{l[o]=m[o]}}g=this.hash_extend(this,n)},makeMap:function(q){var o={},m=q.split(",");for(var n=0;n<m.length;n++){o[m[n]]=true}return o},hash_extend:function(){var m=arguments;if(!m[1]){m=[this,m[0]]}for(var n in m[1]){m[0][n]=m[1][n]}return m[0]},checkState:function(m){if(D.get("autoPost")&&D.get("autoPost").value=="true"){g.needValidate=false}if(document.getElementsByName(l.aliedit.isAliedit)[0]){g.aliedit.isAliedit=document.getElementsByName(l.aliedit.isAliedit)[0].value}if(l.aliedit.isExist){if(g.aliedit.isAliedit=="true"){l.aliedit.isExist=D.query(l.aliedit.isObjectExistFlag,l.cuForm)[0]?true:false}else{l.aliedit.isExist=D.query(l.aliedit.isInputExistFlag,l.cuForm)[0]?true:false}}if(l.mobile.isExist){l.mobile.isExist=D.query(l.mobile.isExitFlag)[0]?true:false}if(l.otp.isExist){l.otp.isExist=D.get(l.otp.isExitFlag)?true:false}if(l.certSign.isExist){l.certSign.isExist=D.get(l.certSign.isExitFlag)?true:false}if(l.mobile.isExist||l.otp.isExist||l.certSign.isExist){l.isScPro=true}if(l.scProError.isExist){l.scProError.isExist=D.get(l.scProError.isExitFlag)?true:false}},data:{mobile:"",certSign:"",otp:"",aliedit:""},validate:function(m){AP.core.api.implement({onFailure:function(n){if(g.erro){g.erro()}}});if(l.aliedit.isExist){this.passwordvalidate()}else{if(l.isScPro&&l.isValidate){this.securityValidate()}else{if(l.scProError.isExist){this.showScProError()}else{if(!l.aliedit.isExist&&!l.isScPro&&!l.scProError.isExist){g.formSucc()}}}}},aliedit:{pName:"",kName:"J_aliedit_key_hidn",isAliedit:"",item:"",itemParent:"",fmItem:"",validate:function(o){if(c){return}c=true;var n=new AP.core.api(l.pwdUrl,{onAPISuccess:g.passwordSucc,onFailure:g.erro,method:l.ajaxType,format:"json"});var m={};m[g.aliedit.pName]=g.data.aliedit;m[g.aliedit.kName]=g.aliedit.pName;m[l.aliedit.isAliedit]=g.aliedit.isAliedit;if(!m[g.aliedit.pName]){b("alieditpwd-ajax-empty")}else{b("alieditpwd-ajax")}m=g.hash_extend(m,l.extraAjaxParams);m.rnd=Math.random();n.call(m)},showError:function(n){var m=g.aliedit;m.preMsg=m.fmItem.innerHTML;m.fmItem.innerHTML=j(n.message);D.addClass(m.itemParent,l.formItemError);g.onApiError(n)},alieditData:function(m){if(l.alieditName&&(typeof AlieditControl.getAlieditJson!="undefined")){this.item=AlieditControl.getAlieditJson(l.cuForm)[l.alieditName]}else{this.item=AlieditControl.getAliedit(l.cuForm)[0]}document.getElementsByName("_seaside_gogo_")[0].value=this.item.ci1();g.data.aliedit=this.item.TextData},noAlieditData:function(){var m=D.query(l.aliedit.isInputExistFlag,l.cuForm)[0];this.item=D.query("input[type='password']",m)[0];g.data.aliedit=this.item.value},data:function(n){if(this.isAliedit=="true"){this.alieditData()}else{this.noAlieditData()}this.itemParent=D.get(l.aliedit.parent);this.fmItem=D.query(l.formItemExplain,this.itemParent)[0];this.pName=document.getElementsByName(l.aliedit.hidnFlag)[0].value;D.get(g.aliedit.pName).value=g.data.aliedit;if(g.data.aliedit.replace(/[^\x00-\xff]/g,"**").length<1){var m={message:"请输入支付密码"};l.isValidate=false;this.showError(m);this.item.focus()}else{if(!D.get(g.aliedit.pName).value){b("alieditpwd-hidden-empty")}else{b("alieditpwd-hidden")}}},reset:function(n){var m=g.aliedit;if(typeof m.preMsg!="undefined"){m.fmItem.innerHTML=m.preMsg;D.removeClass(m.itemParent,l.formItemError)}},beforePwdValidate:function(m){return g.beforePwdValidate()}},mobile:{item:"",fmItem:"",itemParent:"",showError:function(m){this.fmItem.innerHTML=m.message;D.addClass(this.itemParent,l.formItemError);E.on(this.item,"focus",this.onFocus)},data:function(n){this.item=D.get("ackcode");this.fmItem=D.query(l.formItemExplain,D.get("ackcode").parentNode)[0];this.itemParent=D.get("ackcode").parentNode;g.data.mobile=this.item.value;if(this.item.getAttribute("data-explain")){this.preMsg=this.item.getAttribute("data-explain")}if(!(/^\d{6}$/).test(g.data.mobile)){var m={message:"请输入6位数字校验码"};this.showError(m);l.isValidate=false}},onFocus:function(o,n){var m=g.mobile;D.removeClass(m.itemParent,l.formItemError);m.fmItem.innerHTML=m.preMsg},onBlur:function(m){},reset:function(){if(typeof this.preMsg!="undefined"){this.fmItem.innerHTML=this.preMsg;D.removeClass(this.itemParent,l.formItemError)}}},otp:{item:"",fmItem:"",itemParent:"",data:function(o){var m=this;this.item=D.get(l.otp.isExitFlag);this.itemParent=this.item.parentNode;this.fmItem=D.query(l.formItemExplain,m.itemParent)[0];g.data.otp=this.item.value;if(this.item.getAttribute("data-explain")){this.preMsg=this.item.getAttribute("data-explain")}if(!(/^\d{6}$/).test(g.data.otp)){var n={message:"请输入6位数字校验码"};this.showError(n);l.isValidate=false}},showError:function(m){this.fmItem.innerHTML=m.message;D.addClass(this.itemParent,l.formItemError);E.on(this.item,"focus",this.onFocus)},onFocus:function(n){var m=g.otp;D.removeClass(m.itemParent,l.formItemError);m.fmItem.innerHTML=m.item.getAttribute("data-explain")},reset:function(){if(typeof this.preMsg!="undefined"){this.fmItem.innerHTML=this.preMsg;D.removeClass(this.itemParent,l.formItemError)}}},certSign:{inputItem:"",infoPosition:"",data:function(q){var o=window.issuerDn&&issuerDn.indexOf("icbc")!=-1?false:true;var m=!o?"U盾":"支付盾";if(o){b("key_alipay_yes")}try{if(sign){var n=g.data.certSign=sign()}var t=["undefined","ptaException","needInstallPTA"];if(!n||n=="userCanceled"||t.toString().indexOf(n)!=-1){l.isValidate=false}else{if(o&&a.get("ukey_stat")=="no"){a.set("ukey_stat","success",24*60*60*1000);b("key_alipay_success")}}if(o&&(!n||t.toString().indexOf(n)!==-1)){a.set("ukey_stat","no",24*60*60*1000);b("key_alipay_no")}if(typeof n=="undefined"||!n){alert(m+"未插入，请插入后重试")}}catch(r){if(o){a.set("ukey_stat","no",24*60*60*1000);b("key_alipay_no")}l.isValidate=false;alert("对不起，您的浏览器不支持"+m)}},showError:function(m){alert(m.message)}},catchData:function(m){if(l.aliedit.isExist){this.aliedit.data()}if(l.mobile.isExist){this.mobile.data()}if(l.otp.isExist){this.otp.data()}if(l.certSign.isExist){this.certSign.data()}},passwordvalidate:function(m){if(l.isValidate){if(this.aliedit.beforePwdValidate()){f();this.aliedit.validate()}}},resetSecurityProState:function(m){if(l.aliedit.isExist){this.aliedit.reset()}if(l.mobile.isExist){this.mobile.reset()}if(l.otp.isExist){this.otp.reset()}},passwordSucc:function(n,m){c=false;if(m[0].info.validated){if(l.isScPro){if(l.isValidate){g.securityValidate()}}else{g.formSucc()}}else{m[0].info.message=m[0].info.message.replace(/<\/?[^>]+>/gi,"");g.aliedit.showError(m[0].info);d()}},securityValidate:function(o){if(c){return}c=true;var n=new AP.core.api(l.scProUrl,{onAPISuccess:g.scConnectSucc,onFailure:g.erro,method:"POST",format:"json"});var m=g.hash_extend({ackcode:g.data.mobile,signedData:g.data.certSign,otpPassword:g.data.otp},l.extraAjaxParams);n.call(m)},scConnectSucc:function(o,m){c=false;var n=m[0];if(n.info.validated){g.formSucc()}else{g.showError(n.info);d()}},showError:function(n){try{if(n.validateProductName=="sms_ivr"){g.mobile.showError(n)}if(n.validateProductName=="otp"){g.otp.showError(n)}if(n.validateProductName=="ukey"||n.validateProductName=="thirdkey"){g.certSign.showError(n)}if(!n.validateProductName&&n.message=="网络超时"){g.erro()}g.onApiError(n)}catch(m){alert(m)}},showScProError:function(m){h("安全产品不支持")},erro:function(m){c=false;alert("对不起,发生了某些错误,请您重试!")},onApiError:function(m){},beforePwdValidate:function(m){return true},onApiSucc:"",formSucc:function(){if(!g.onApiSucc){l.cuForm.submit()}else{g.onApiSucc()}}}}();