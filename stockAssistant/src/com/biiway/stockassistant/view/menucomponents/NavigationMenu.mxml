<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 xmlns:mx="library://ns.adobe.com/flex/mx"
		 creationComplete="creationCompleteHandler(event)"
		 width="210"
		 top="62"
		 height="100%">
	<fx:Script>
		<![CDATA[
			import com.biiway.stockassistant.components.ExpandGroup;
			import com.biiway.stockassistant.util.Const;
			
			import mx.collections.ArrayCollection;
			import mx.events.FlexEvent;
			
			import spark.components.Label;
			
			private var _datafield:String = "text";
			
			private var _dataProvider:ArrayCollection;
			
			private var creationCompleteMark:Boolean = false;
			
			protected function creationCompleteHandler(event:FlexEvent):void
			{
				creationCompleteMark = true;
				
				this.height = this.height - Const.GAP_SHADOW;
				
				initMenu();
			}
			
			private function initMenu():void
			{
				if(dataProvider == null || dataProvider.length == 0) return;
				
				content.removeAllElements();
				
				for(var i:int=0,num:int=dataProvider.length; i<num; i++)
				{
					var data:Object = dataProvider.getItemAt(i);
					
					var group:ExpandGroup = new ExpandGroup();
					group.height = 30;
					group.y = i * 30;
					group.width = this.width-30;
					group.data = data;
//					group.useHandCursor = true;
//					group.buttonMode =  true;
					group.addEventListener(MouseEvent.ROLL_OUT,menuContainerHandler,false,0,true);
					group.addEventListener(MouseEvent.ROLL_OVER,menuContainerHandler,false,0,true);
					
					var label:Label = new Label();
					label.text = data[datafield];
					label.verticalCenter = 0;
					label.maxWidth = this.width-30;
					label.toolTip  = data[datafield];
					label.setStyle("lineBreak","toFit");
					label.maxDisplayedLines = 1;
					
					group.addElement(label);
					
					content.addElement(group);
				}
			}
			
			protected function menuContainerHandler(event:MouseEvent):void
			{
				switch(event.type)
				{
					case MouseEvent.ROLL_OUT :
						break;
					
					case MouseEvent.ROLL_OVER :

						break;
					
					default:
						break;
				}
			}

			public function get datafield():String
			{
				return _datafield;
			}

			public function set datafield(value:String):void
			{
				_datafield = value;
			}

			public function get dataProvider():ArrayCollection
			{
				return _dataProvider;
			}

			public function set dataProvider(value:ArrayCollection):void
			{
				_dataProvider = value;
				creationCompleteMark ? initMenu() : null;
			}

							
		]]>
	</fx:Script>
	
	<s:Group height="30" width="100%">
		<s:Rect left="0" right="0" top="0" height="30">
			<s:fill>
				<s:LinearGradient rotation="90">
					<s:GradientEntry color="0xEEEEEE"/>
				</s:LinearGradient>
			</s:fill>
		</s:Rect>
		<s:Rect left="0" top="0" height="30" width="4">
			<s:fill>
				<s:LinearGradient rotation="90">
					<s:GradientEntry color="0xDD4B39"/>
				</s:LinearGradient>
			</s:fill>
		</s:Rect>
	</s:Group>
	
	<s:Group x="30" id="content" width="100%" height="100%"/>
	
</s:Group>
