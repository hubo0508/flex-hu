<?xml version="1.0" encoding="utf-8"?>
<!--
	 <p><b>auth：</b>HUBO</p>
	 <p><b>create-time：</b>2012-2-10</p>
	 <p><b>mail：</b>hubo.0508ⓐgmail.com	</p>
-->
<s:SkinnableContainer xmlns:fx="http://ns.adobe.com/mxml/2009"
					  xmlns:s="library://ns.adobe.com/flex/spark"
					  xmlns:mx="library://ns.adobe.com/flex/mx"
					  xmlns:components="com.printingoffice.components.*"
					  top="115"
					  left="0" 
					  width="220"
					  height="100%">
	<fx:Script>
		<![CDATA[
			import com.printingoffice.components.TooTip;
			import com.printingoffice.util.IconConst;
			import com.printingoffice.util.UIUtil;
			import com.printingoffice.view.components.ChooseMenuThemes;
			
			import mx.events.DynamicEvent;
			import mx.events.FlexMouseEvent;
			import mx.managers.PopUpManager;
			
			import spark.components.Group;
			
			private var chooseMenuThemes:ChooseMenuThemes;
			
			private var tootip:TooTip;

			protected function menuThemes_clickHandler(event:MouseEvent):void
			{
				if(chooseMenuThemes == null)
				{
					chooseMenuThemes = new ChooseMenuThemes();
					chooseMenuThemes.addEventListener(FlexMouseEvent.MOUSE_DOWN_OUTSIDE,mouseDownOutsideHandler,false,0,true);
					chooseMenuThemes.addEventListener(ChooseMenuThemes.CLICK_EVENT,chooseTypeClickHandler,false,0,true);
					
					var point:Point = UIUtil.getUiAbsolutePosition(menuThemes);
					chooseMenuThemes.x = point.x;
					chooseMenuThemes.y = point.y + menuThemes.height + 2;
				}

				PopUpManager.addPopUp(chooseMenuThemes, UIUtil.getApplication(this), false);				
			}
			
			protected function chooseTypeClickHandler(event:DynamicEvent):void
			{
				var selectItem:Object = event.data;
				menuValue.text = selectItem.type;
				
				PopUpManager.removePopUp(chooseMenuThemes);
			}
			
			protected function mouseDownOutsideHandler(event:Event):void
			{
				PopUpManager.removePopUp(chooseMenuThemes);
			}

			protected function menuThemes_rollHandler(event:MouseEvent):void
			{
				switch(event.type)
				{
					case MouseEvent.ROLL_OVER:							
						this.showTootip(true);
						break;
					
					case MouseEvent.ROLL_OUT :
						this.showTootip(false);
						break;
					
					default:
						break;
				}
			}
			
			private function showTootip(value:Boolean):void
			{
				if (value)
				{
					if (tootip == null)
					{
						tootip = new TooTip("切换模块");
					} 
					
					var tootipwidth:Number = tootip.width;
					tootipwidth = tootipwidth == 0 ? 58*0.5 : tootipwidth * 0.5
					
					var point:Point = UIUtil.getUiAbsolutePosition(menuThemes);
					tootip.x = (point.x + menuThemes.width*0.5) - tootipwidth;
					tootip.y = point.y + menuThemes.height+10; 
					
					PopUpManager.addPopUp(tootip, UIUtil.getApplication(this), false);
				}
				else
				{
					if (tootip)
					{
						PopUpManager.removePopUp(tootip);
					}
				}
			}

		]]>
	</fx:Script>
	
	<s:HGroup id="menuThemes"   verticalAlign="middle" useHandCursor="true" buttonMode="true"  y="26" x="20"
			  click="menuThemes_clickHandler(event)" rollOut="menuThemes_rollHandler(event)" rollOver="menuThemes_rollHandler(event)">
		<s:Label id="menuValue" text="功能菜单"  color="#FF2222" fontSize="18"/>
		<components:Triangle/>
	</s:HGroup>
	
	<s:BitmapImage source="{IconConst.line}" width="100%" height="3" top="55"/>
	

</s:SkinnableContainer>
